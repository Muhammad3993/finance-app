<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="icon" type="image/svg+xml" href="/mainlogo.svg">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Finance App</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/@telegram-apps/sdk@1.0.0/dist/index.iife.js"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      padding-top: var(--content-safe-area-inset-top, 0px);
      padding-bottom: var(--content-safe-area-inset-bottom, 0px);
      padding-left: var(--content-safe-area-inset-left, 0px);
      padding-right: var(--content-safe-area-inset-right, 0px);
    }

    #wrap {
      display: flex;
      justify-content: center;
      align-items: center;
      height: calc(100vh - var(--content-safe-area-inset-top, 0px) - var(--content-safe-area-inset-bottom, 0px));
    }

    .content {
      text-align: center;
      padding: 20px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .mobile-body {
      background-color: #e0e0e0;
    }

    .mobile-wrap {
      margin: 0 auto;
      width: 100%;
    }

    .mobile-content {
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div id="wrap">
    <div id="root" class="content">
      <h1>Welcome to the Finance App</h1>
      <p>Your Safe Area Insets are automatically adjusted!</p>
    </div>
  </div>

  <script>
    // Safe Area qiymatlarini boshqaruvchi o'zgaruvchi
    var contentSafeAreaInset = { top: 0, bottom: 0, left: 0, right: 0 };

    // Safe Area inset funksiyasi
    function setContentSafeAreaInset(data) {
      if (typeof data !== 'undefined') {
        if (typeof data.top !== 'undefined') {
          contentSafeAreaInset.top = data.top;
        }
        if (typeof data.bottom !== 'undefined') {
          contentSafeAreaInset.bottom = data.bottom;
        }
        if (typeof data.left !== 'undefined') {
          contentSafeAreaInset.left = data.left;
        }
        if (typeof data.right !== 'undefined') {
          contentSafeAreaInset.right = data.right;
        }
      }

      // CSS o'zgaruvchilarini o'rnatish
      document.documentElement.style.setProperty('--content-safe-area-inset-top', contentSafeAreaInset.top + 'px');
      document.documentElement.style.setProperty('--content-safe-area-inset-bottom', contentSafeAreaInset.bottom + 'px');
      document.documentElement.style.setProperty('--content-safe-area-inset-left', contentSafeAreaInset.left + 'px');
      document.documentElement.style.setProperty('--content-safe-area-inset-right', contentSafeAreaInset.right + 'px');
    }

    // Telegram WebApp uchun maxsus funksiyalar
    (function () {
      var { retrieveLaunchParams, postEvent, setContentSafeAreaInset } = window.telegramApps.sdk;
      var lp = retrieveLaunchParams();
      if (['macos', 'tdesktop', 'weba', 'web', 'webk'].includes(lp.platform)) {
        return;
      }
      // Fullscreen rejimini ishga tushirish
      postEvent('web_app_expand');
      setContentSafeAreaInset({ top: 0, bottom: 0, left: 0, right: 0 });

      // Mobile o'zgarishlar qo'shish
      document.body.classList.add('mobile-body');
      document.getElementById('wrap').classList.add('mobile-wrap');
      document.getElementById('root').classList.add('mobile-content');
    })();

    // Telegram WebApp viewportini kuzatish
    Telegram.WebApp.onEvent('viewportChanged', () => {
      const viewport = Telegram.WebApp.viewportStable;
      setContentSafeAreaInset({
        top: viewport.top,
        bottom: viewport.bottom,
        left: viewport.left,
        right: viewport.right,
      });
    });

    // Telegram WebApp tayyorlash
    Telegram.WebApp.ready();
    Telegram.WebApp.expand();
  </script>
</body>
</html>
